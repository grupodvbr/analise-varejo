<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Resumo por Finalizadora</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f1115;
  --card:#151824;
  --border:#1f2330;
  --primary:#ff6a00;
  --success:#4cd964;
  --text:#ffffff;
  --muted:#9aa0b4;
}

*{
  box-sizing:border-box;
  font-family:Inter, sans-serif;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
}

header{
  padding:20px;
  text-align:center;
  border-bottom:1px solid var(--border);
}

header h1{
  margin:0;
  font-size:22px;
  font-weight:700;
}

header p{
  margin:6px 0 0;
  font-size:14px;
  color:var(--muted);
}

.container{
  max-width:1200px;
  margin:24px auto;
  padding:0 16px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px;
  cursor:pointer;
  transition:all .25s ease;
}

.card:hover{
  transform:translateY(-4px);
  border-color:var(--primary);
}

.card-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}

.card-header h2{
  font-size:16px;
  margin:0;
  font-weight:600;
}

.badge{
  background:#1f2330;
  padding:4px 10px;
  border-radius:20px;
  font-size:12px;
  color:var(--muted);
}

.total{
  font-size:22px;
  font-weight:700;
  color:var(--success);
}

.details{
  margin-top:14px;
  display:none;
  border-top:1px dashed var(--border);
  padding-top:12px;
}

.details ul{
  list-style:none;
  padding:0;
  margin:0;
}

.details li{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  font-size:14px;
  border-bottom:1px solid var(--border);
}

.details li:last-child{
  border-bottom:none;
}

footer{
  text-align:center;
  padding:20px;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>
<body>

<header>
  <h1>Resumo por Finalizadora</h1>
  <p>Clique em uma finalizadora para ver os valores individuais</p>
</header>

<div class="container" id="cards"></div>

<footer>
  Relat√≥rio gerado automaticamente ‚Ä¢ Varejo F√°cil
</footer>

<script>
// =====================================================
// üëâ COLE O JSON COMPLETO AQUI (entre { e })
// =====================================================
const data = {
  /* COLE AQUI TODO O JSON DA API */
};

// =====================================================
// MAPA DE FORMAS DE PAGAMENTO
// =====================================================
const formasMap = {};
data.formasPagamento.forEach(f => {
  formasMap[f.id] = f.descricao;
});

// =====================================================
// AGRUPAMENTO POR FINALIZADORA
// =====================================================
const agrupado = {};

data.items.forEach(item => {
  if (item.cancelada) return;

  item.finalizacoes.forEach(f => {
    const id = f.finalizadoraId;
    if (!agrupado[id]) {
      agrupado[id] = {
        nome: formasMap[id] || `Finalizadora ${id}`,
        total: 0,
        valores: []
      };
    }
    agrupado[id].total += f.valor;
    agrupado[id].valores.push(f.valor);
  });
});

// =====================================================
// RENDERIZA√á√ÉO
// =====================================================
const container = document.getElementById("cards");

Object.values(agrupado)
  .sort((a, b) => b.total - a.total)
  .forEach(f => {

    f.valores.sort((a, b) => a - b);

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div class="card-header">
        <h2>${f.nome}</h2>
        <span class="badge">${f.valores.length} lan√ßamentos</span>
      </div>
      <div class="total">R$ ${f.total.toFixed(2).replace('.', ',')}</div>
      <div class="details">
        <ul>
          ${f.valores.map(v => `
            <li>
              <span>Valor</span>
              <strong>R$ ${v.toFixed(2).replace('.', ',')}</strong>
            </li>
          `).join("")}
        </ul>
      </div>
    `;

    card.addEventListener("click", () => {
      const details = card.querySelector(".details");
      details.style.display = details.style.display === "block" ? "none" : "block";
    });

    container.appendChild(card);
  });
</script>

</body>
</html>
